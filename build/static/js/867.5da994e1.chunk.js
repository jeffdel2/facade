"use strict";(self.webpackChunkreact_niq_app=self.webpackChunkreact_niq_app||[]).push([[867],{4867:(e,s,i)=>{i.r(s),i.d(s,{default:()=>P});var t=i(9950),r=i(9272),a=i(7321),n=i(5342),l=i(8506),o=i(5547),d=i(5310),c=i(1521),x=i(2036),u=i(6615),h=i(6060),p=i(4514),m=i(6057),g=i(6240),v=i(6812),j=i(9737),b=i(5060),A=i(6309),f=i(1672),y=i(7356),C=i(4414);const w=e=>{let{icon:s,label:i,value:t}=e;return(0,C.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1.5,p:2,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[(0,C.jsx)(a.A,{sx:{color:"primary.main"},children:s}),(0,C.jsxs)(a.A,{children:[(0,C.jsx)(n.A,{variant:"body2",color:"text.secondary",children:i}),(0,C.jsx)(n.A,{variant:"subtitle1",fontWeight:"medium",children:t})]})]})},P=()=>{var e;const{authState:s}=(0,r.rg)(),i=(0,y.A)(),[P,S]=(0,t.useState)(!1),[k,I]=(0,t.useState)(!1),[T,W]=(0,t.useState)({open:!1,message:"",severity:"success"}),[M,D]=(0,t.useState)({address:"",phone:"",birthdate:"",preferences:{notifications:!0,newsletter:!0}}),L=(null===s||void 0===s?void 0:s.isAuthenticated)||!1,N=(null===s||void 0===s?void 0:s.isPending)||!1,R=null===s||void 0===s||null===(e=s.idToken)||void 0===e?void 0:e.claims;if(N)return(0,C.jsx)(a.A,{sx:{width:"100%",mt:4},children:(0,C.jsx)(l.A,{})});if(!L||!R)return(0,C.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:(0,C.jsx)(n.A,{variant:"h6",color:"text.secondary",children:"Please log in to view your profile."})});const _={points:1250,status:"Gold Member",memberSince:"January 2024",lastPurchase:"March 15, 2024",progress:75,pointsToNext:250};return(0,C.jsxs)(a.A,{sx:{maxWidth:1200,mx:"auto",p:{xs:2,md:4}},children:[(0,C.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:4},children:[(0,C.jsx)(o.A,{sx:{position:"relative",overflow:"visible",background:`linear-gradient(45deg, ${i.palette.primary.main}, ${i.palette.secondary.main})`,color:"white",p:2},children:(0,C.jsxs)(a.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},gap:3,position:"relative",zIndex:1},children:[(0,C.jsx)(d.A,{src:"string"===typeof(null===R||void 0===R?void 0:R.picture)?R.picture:void 0,alt:(null===R||void 0===R?void 0:R.name)||(null===R||void 0===R?void 0:R.email)||"User",sx:{width:120,height:120,border:"4px solid white",boxShadow:2}}),(0,C.jsxs)(a.A,{sx:{flex:1,textAlign:{xs:"center",sm:"left"}},children:[(0,C.jsx)(n.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"string"===typeof(null===R||void 0===R?void 0:R.name)?R.name:"string"===typeof(null===R||void 0===R?void 0:R.email)?R.email:"User"}),(0,C.jsx)(n.A,{variant:"body1",sx:{opacity:.9},children:"string"===typeof(null===R||void 0===R?void 0:R.email)?R.email:""}),(0,C.jsx)(c.A,{label:_.status,sx:{mt:1,backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","& .MuiChip-label":{fontWeight:"medium"}}})]})]})}),(0,C.jsxs)(a.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2},children:[(0,C.jsx)(w,{icon:(0,C.jsx)(g.A,{}),label:"Reward Points",value:_.points.toLocaleString()}),(0,C.jsx)(w,{icon:(0,C.jsx)(v.A,{}),label:"Member Status",value:_.status}),(0,C.jsx)(w,{icon:(0,C.jsx)(j.A,{}),label:"Member Since",value:_.memberSince}),(0,C.jsx)(w,{icon:(0,C.jsx)(b.A,{}),label:"Last Purchase",value:_.lastPurchase})]}),(0,C.jsx)(o.A,{children:(0,C.jsxs)(x.A,{children:[(0,C.jsx)(n.A,{variant:"h6",gutterBottom:!0,children:"Progress to Next Tier"}),(0,C.jsxs)(a.A,{sx:{mt:2},children:[(0,C.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,C.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["Current: ",_.status]}),(0,C.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:[_.pointsToNext," points to next tier"]})]}),(0,C.jsx)(l.A,{variant:"determinate",value:_.progress,sx:{height:8,borderRadius:4,backgroundColor:"rgba(0, 0, 0, 0.04)","& .MuiLinearProgress-bar":{borderRadius:4}}})]})]})}),(0,C.jsx)(o.A,{children:(0,C.jsxs)(x.A,{children:[(0,C.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,C.jsx)(n.A,{variant:"h6",children:"Profile Details"}),(0,C.jsx)(u.A,{startIcon:P?(0,C.jsx)(A.A,{}):(0,C.jsx)(f.A,{}),variant:P?"contained":"outlined",onClick:P?async()=>{I(!0);try{await new Promise(e=>setTimeout(e,1e3)),W({open:!0,message:"Profile updated successfully!",severity:"success"}),S(!1)}catch(e){console.error("Error updating user metadata:",e),W({open:!0,message:"Failed to update profile. Please try again.",severity:"error"})}finally{I(!1)}}:()=>S(!0),disabled:k,children:P?k?"Saving...":"Save Changes":"Edit Profile"})]}),(0,C.jsxs)(a.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)"},gap:3},children:[(0,C.jsx)(h.A,{fullWidth:!0,label:"Address",value:M.address||"",onChange:e=>D(s=>({...s,address:e.target.value})),disabled:!P,margin:"normal"}),(0,C.jsx)(h.A,{fullWidth:!0,label:"Phone Number",value:M.phone||"",onChange:e=>D(s=>({...s,phone:e.target.value})),disabled:!P,margin:"normal"}),(0,C.jsx)(h.A,{fullWidth:!0,label:"Birth Date",type:"date",value:M.birthdate||"",onChange:e=>D(s=>({...s,birthdate:e.target.value})),disabled:!P,margin:"normal",InputLabelProps:{shrink:!0}})]})]})})]}),(0,C.jsx)(p.A,{open:T.open,autoHideDuration:6e3,onClose:()=>W(e=>({...e,open:!1})),children:(0,C.jsx)(m.A,{onClose:()=>W(e=>({...e,open:!1})),severity:T.severity,sx:{width:"100%"},children:T.message})})]})}}}]);